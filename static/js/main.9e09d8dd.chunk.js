(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){e.exports=a(57)},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(20),l=a.n(i),o=a(21),s=a(17),r=a(6),m=a(7),u=a(9),d=a(8),h=a(4),v=a(10),p=a(5);function b(e){return Math.round(Math.pow(36,e+1)-Math.random()*Math.pow(36,e)).toString(36).slice(1)}function E(e){return new Date(e).toUTCString().split(" ").slice(1,4).join("/")}function N(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}function f(e,t){var a=t||"$";return(e/=100)<0?"-"+a+Math.abs(e).toFixed(2):a+e.toFixed(2)}var I=a(19),O=a.n(I),g="ADD_INVOICE",k="EDIT_INVOICE",y="DELETE_INVOICE",x="ADD_BANK_TXN",j="EDIT_BANK_TXN";var C=a(18),w=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={description:"",invoiceId:"",amount:0},a.onFormSubmit=a.onFormSubmit.bind(Object(h.a)(a)),a.onCancel=a.onCancel.bind(Object(h.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(h.a)(a)),a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"onFormSubmit",value:function(e){e.preventDefault();var t=this.props.onSubmit,a=this.state,n=a.description,c=a.invoiceId,i=a.amount;t&&n&&c&&i&&t({description:n,invoiceId:c,amount:100*i})}},{key:"onCancel",value:function(e){e.preventDefault();var t=this.props.onClose;t&&t()}},{key:"handleInputChange",value:function(e){var t=this.props.invoices,a=e.target,n="checkbox"===a.type?a.checked:a.value,c=a.name,i=Object(C.a)({},c,n);"invoiceId"===c&&(i.amount=t[a.selectedIndex-1].amount/100),this.setState(i)}},{key:"render",value:function(){var e=this.props.invoices,t=this.state,a=t.description,n=t.invoiceId,i=t.amount;return c.a.createElement("form",{onSubmit:this.onFormSubmit,className:"section"},c.a.createElement("h3",{className:"title is-3"},"Add a bank transaction"),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Description"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{name:"description",className:"input",type:"text",placeholder:"e.g Payment for work",value:a,onChange:this.handleInputChange}))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Invoice"),c.a.createElement("div",{className:"control"},c.a.createElement("div",{className:"select"},c.a.createElement("select",{value:n,onChange:this.handleInputChange,name:"invoiceId"},c.a.createElement("option",{key:""},"Select a client"),e&&e.map(function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.clientName)}))))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Amount"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{name:"amount",className:"input",type:"number",placeholder:"100.50",value:i,step:"0.50",onChange:this.handleInputChange}))),c.a.createElement("div",{className:"field is-grouped is-grouped-centered"},c.a.createElement("p",{className:"control"},c.a.createElement("button",{className:"button is-success",type:"submit"},"Submit")),c.a.createElement("p",{className:"control"},c.a.createElement("button",{className:"button is-black",onClick:this.onCancel},"Cancel"))))}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={isModalOpen:!1},a.onAddTxn=function(e){(0,a.props.addBankTxn)(e),a.closeTxnModal()},a.openTxnModal=a.openTxnModal.bind(Object(h.a)(a)),a.closeTxnModal=a.closeTxnModal.bind(Object(h.a)(a)),O.a.setAppElement("#root"),a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"openTxnModal",value:function(){this.setState({isModalOpen:!0})}},{key:"closeTxnModal",value:function(){this.setState({isModalOpen:!1})}},{key:"render",value:function(){var e=this.props,t=e.bankTxns,a=e.clz,n=e.invoices,i=this.state.isModalOpen;return c.a.createElement("div",{className:a},c.a.createElement("header",{className:"has-background-success"},c.a.createElement("h4",{className:"title is-4 has-text-white is-clearfix"},"Bank Transactions",c.a.createElement("span",{className:"button is-primary is-inverted is-pulled-right is-outlined",onClick:this.openTxnModal},"Add a Bank Transaction"))),c.a.createElement("table",{className:"table is-striped is-fullwidth"},c.a.createElement("thead",{className:"has-background-success"},c.a.createElement("tr",null,c.a.createElement("th",{className:"has-text-white"},"Date"),c.a.createElement("th",{className:"has-text-white"},"Invoice Id"),c.a.createElement("th",{className:"has-text-white"},"Description"),c.a.createElement("th",{className:"has-text-white"},"Amount"))),c.a.createElement("tbody",null,t.map(function(e){return c.a.createElement("tr",{key:e.id},c.a.createElement("td",null,E(e.created)),c.a.createElement("td",null,e.invoiceId),c.a.createElement("td",null,e.description),c.a.createElement("td",{className:"has-text-right"},f(e.amount)))}))),c.a.createElement(O.a,{className:"Modal",overlayClassName:"Overlay",isOpen:i,onRequestClose:this.closeTxnModal,contentLabel:"Modal"},i&&c.a.createElement(w,{invoices:n,onSubmit:this.onAddTxn,onClose:this.closeTxnModal})))}}]),t}(n.Component);var T=Object(p.c)(function(e){return{bankTxns:e.bankTxns,invoices:e.invoices}},{addBankTxn:function(e){return{type:x,txn:e}}})(M),S=function(e){function t(){return Object(r.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.invoices,a=e.bankTxns.reduce(function(e,t){return e+t.amount},0),n=function(e){var t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setDate(t.getDate()-e),t}(30).getTime(),i=t.reduce(function(e,t){return t.created>n&&(e+=1),e},0),l=a>100?"is-success":a<0?"is-danger":"is-warning";return c.a.createElement("div",{className:"tile"},c.a.createElement("div",{className:"tile is-parent"},c.a.createElement("article",{className:"tile is-child notification "+l},c.a.createElement("p",{className:"title"},f(a)),c.a.createElement("p",{className:"subtitle"},"Bank balance"))),c.a.createElement("div",{className:"tile is-parent"},c.a.createElement("article",{className:"tile is-child notification is-info"},c.a.createElement("p",{className:"title"},i),c.a.createElement("p",{className:"subtitle"},"Invoices (Last 30days)"))))}}]),t}(n.Component);var D=Object(p.c)(function(e){return{invoices:e.invoices,bankTxns:e.bankTxns}})(S),A=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={clientName:"",amount:0,id:"",created:0},a.onFormSubmit=a.onFormSubmit.bind(Object(h.a)(a)),a.onCancel=a.onCancel.bind(Object(h.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(h.a)(a)),a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.invoice,t=e.clientName,a=e.amount,n=e.created,c=void 0===n?Date.now():n,i=e.id;a/=100,this.setState({clientName:t,amount:a,id:i,created:c})}},{key:"onFormSubmit",value:function(e){e.preventDefault();var t=this.props.onSubmit,a=this.state,n=a.clientName,c=a.amount,i=a.id,l=a.created;t&&n&&c&&t({id:i,created:l,clientName:n,amount:100*c})}},{key:"onCancel",value:function(e){e.preventDefault();var t=this.props.onClose;t&&t()}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(C.a)({},n,a))}},{key:"render",value:function(){var e=this.state,t=e.clientName,a=e.amount,n=e.created,i=e.id;return c.a.createElement("form",{onSubmit:this.onFormSubmit,className:"section"},c.a.createElement("h3",{className:"title is-3"},i?"Edit the Invoice":"Add an Invoice"),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Invoice Date"),c.a.createElement("div",{className:"control"},E(n))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Client Name"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{name:"clientName",className:"input",type:"text",placeholder:"e.g John Doe",value:t,onChange:this.handleInputChange}))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Amount"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{name:"amount",className:"input",type:"number",placeholder:"100.50",value:a,onChange:this.handleInputChange}))),c.a.createElement("div",{className:"field is-grouped is-grouped-centered"},c.a.createElement("p",{className:"control"},c.a.createElement("button",{className:"button is-success",type:"submit"},i?"Edit Invoice":"Add Invoice")),c.a.createElement("p",{className:"control"},c.a.createElement("button",{className:"button is-black",onClick:this.onCancel},"Cancel"))))}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={isModalOpen:!1,selectedInvoice:null},a.handleInvoiceEdit=function(e){var t=e.target.parentElement,n=a.props.invoices;t&&"TR"===t.tagName&&t.id&&a.openInvoiceModal(n[t.rowIndex-1])},a.onAddInvoice=function(e){var t=a.props,n=t.addInvoice,c=t.updateInvoice;e&&e.id?c(e):n(e),a.closeInvoiceModal()},a.openInvoiceModal=a.openInvoiceModal.bind(Object(h.a)(a)),a.closeInvoiceModal=a.closeInvoiceModal.bind(Object(h.a)(a)),O.a.setAppElement("#root"),a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"openInvoiceModal",value:function(e){this.setState({isModalOpen:!0,selectedInvoice:e})}},{key:"closeInvoiceModal",value:function(){this.setState({isModalOpen:!1,selectedInvoice:null})}},{key:"render",value:function(){var e=this.props,t=e.invoices,a=e.bankTxns,n=e.clz,i=this.state,l=i.isModalOpen,o=i.selectedInvoice,s={};return a.forEach(function(e){s[e.invoiceId]?s[e.invoiceId]+=e.amount:s[e.invoiceId]=e.amount}),c.a.createElement("div",{className:n},c.a.createElement("header",{className:"has-background-success"},c.a.createElement("h4",{className:"title is-4 has-text-white is-clearfix"},"Invoices",c.a.createElement("span",{className:"button is-primary is-inverted is-pulled-right is-outlined",onClick:this.openInvoiceModal},"Add an Invoice"))),c.a.createElement("table",{className:"table is-fullwidth is-striped"},c.a.createElement("thead",{className:"has-background-success"},c.a.createElement("tr",null,c.a.createElement("th",{className:"has-text-white"},"Date"),c.a.createElement("th",{className:"has-text-white"},"Id"),c.a.createElement("th",{className:"has-text-white"},"Client Name"),c.a.createElement("th",{className:"has-text-white"},"Amount"),c.a.createElement("th",{className:"has-text-white has-text-centered"},"Status"))),c.a.createElement("tbody",{onClick:this.handleInvoiceEdit},t.map(function(e){return c.a.createElement("tr",{key:e.id,id:e.id},c.a.createElement("td",null,E(e.created)),c.a.createElement("td",null,e.id),c.a.createElement("td",null,e.clientName),c.a.createElement("td",{className:"has-text-right"},f(e.amount)),c.a.createElement("td",{className:"has-text-centered"},e.amount===s[e.id]?"PAID":"NOT PAID"))}))),c.a.createElement(O.a,{className:"Modal",overlayClassName:"Overlay",isOpen:l,onRequestClose:this.closeInvoiceModal,contentLabel:"Modal"},l&&c.a.createElement(A,{invoice:o,onSubmit:this.onAddInvoice,onClose:this.closeInvoiceModal})))}}]),t}(n.Component);var _=Object(p.c)(function(e){return{invoices:e.invoices,bankTxns:e.bankTxns}},{addInvoice:function(e){return{type:g,invoice:e}},updateInvoice:function(e){return{type:k,invoice:e}}})(B),F=function(){return c.a.createElement("div",{className:"container"},c.a.createElement("section",{className:"section"},c.a.createElement(D,null)),c.a.createElement("section",{className:"columns"},c.a.createElement(T,{clz:"widget column is-half"}),c.a.createElement(_,{clz:"widget column is-half"})))},z=function(){return c.a.createElement("div",null,"404")},L=function(){return c.a.createElement("nav",{className:"navbar is-success",role:"navigation","aria-label":"main navigation"},c.a.createElement("div",{className:"navbar-brand"},c.a.createElement("a",{className:"navbar-item",href:"/"},c.a.createElement("img",{src:"/self-employed-logo.png",alt:"Self Employed - A Financial App",width:"50",height:"50"}),c.a.createElement("p",{className:"title is-4"},"Self Employed"))))},R=c.a.createElement("div",null,c.a.createElement(L,null),c.a.createElement(s.c,null,c.a.createElement(s.a,{exact:!0,path:"/",component:F}),c.a.createElement(s.a,{component:z}))),K=function(e){var t=e.history;return c.a.createElement(o.a,{history:t},R)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=a(13),H=a(16),J=a(35),V=a(23),X=a(25),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.invoice;switch(t.type){case g:return[{id:b(16),clientName:a.clientName,created:Date.now(),amount:parseInt(a.amount,10),status:0}].concat(Object(X.a)(e));case k:return e.map(function(e){return e.id===a.id?Object(V.a)({},a):Object(V.a)({},e,{updated:Date.now()})});case y:return e.filter(function(e){return e.id!==a.id});default:return e}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.txn;switch(t.type){case x:return[{id:b(16),description:a.description,invoiceId:a.invoiceId,created:Date.now(),amount:parseInt(a.amount,10)}].concat(Object(X.a)(e));case j:return e.map(function(e){return e.id===a.id?Object(V.a)({},a):e});default:return e}},U=function(e){return Object(H.c)({invoices:q,bankTxns:W,router:Object(o.b)(e)})},$=Object(P.a)();var G=["Estell Rockhill","Eliz Wahlstrom","Nadia Kierstead","Brittny Bowersox","Keli Sobotka","Otha Eves","Orpha Kinsel","Aurora Sprinkle","Stewart Slavin","Jolie Garrison","Twila Reames","Billie Mikus","Peter Brunt","Marcell Luzier","Brad Becher","Dawn Siqueiros","Felton Esperanza","Larissa Riddles","Lavone Ton","Hiram Netzer"],Q=function(){for(var e=[],t=0;t<G.length;t++){var a={id:b(16),clientName:G[t],amount:N(-5e3,1e4),status:0},n=new Date;n.setDate(n.getDate()-N(0,40)),a.created=n.getTime(),e.push(a)}return e.sort(function(e,t){return e.created<t.created?1:-1})},Y=function(e){for(var t=[],a=0;a<e.length-5;a++){var n=e[a],c={id:b(16),description:n.amount>=0?"Invoice payment by ".concat(n.clientName):"Refund to ".concat(n.clientName),invoiceId:n.id,amount:n.amount},i=new Date(n.created);i.setHours(i.getHours()+N(1,2)),c.created=i.getTime(),t.push(c)}return t.sort(function(e,t){return e.created<t.created?1:-1})},Z=function(){var e=Q();return{invoices:e,bankTxns:Y(e)}},ee=(a(56),function(e){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||H.d;return Object(H.e)(U($),e,t(Object(H.a)(Object(J.a)($))))}(Z()));l.a.render(c.a.createElement(p.a,{store:ee},c.a.createElement(K,{history:$})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.9e09d8dd.chunk.js.map