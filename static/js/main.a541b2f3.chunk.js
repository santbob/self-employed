(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(43)},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(13),l=a.n(i),o=a(9),s=a(10),r=function(){return c.a.createElement("nav",{className:"navbar has-background-info",role:"navigation","aria-label":"main navigation"},c.a.createElement("div",{className:"navbar-brand"},c.a.createElement("a",{className:"navbar-item",href:"/"},c.a.createElement("p",{className:"title is-4 has-text-white"},"Self Employed"))))},m=a(2),d=a(3),u=a(5),h=a(4),v=a(1),p=a(6),b=a(12),E=a.n(b);function N(e){return Math.round(Math.pow(36,e+1)-Math.random()*Math.pow(36,e)).toString(36).slice(1)}function f(e){return new Date(e).toUTCString().split(" ").slice(1,4).join("/")}function I(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}function k(e,t){var a=t||"$";return(e/=100)<0?"-"+a+Math.abs(e).toFixed(2):a+e.toFixed(2)}var O="ADD_INVOICE",g="EDIT_INVOICE",x="DELETE_INVOICE",y="ADD_BANK_TXN",C="EDIT_BANK_TXN";var j=a(11),w=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={description:"",invoiceId:"",amount:0},a.onFormSubmit=a.onFormSubmit.bind(Object(v.a)(a)),a.onCancel=a.onCancel.bind(Object(v.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(v.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"onFormSubmit",value:function(e){e.preventDefault();var t=this.props.onSubmit,a=this.state,n=a.description,c=a.invoiceId,i=a.amount;t&&n&&c&&i&&t({description:n,invoiceId:c,amount:100*i})}},{key:"onCancel",value:function(e){e.preventDefault();var t=this.props.onClose;t&&t()}},{key:"handleInputChange",value:function(e){var t=this.props.invoices,a=e.target,n="checkbox"===a.type?a.checked:a.value,c=a.name,i=Object(j.a)({},c,n);"invoiceId"===c&&(i.amount=t[a.selectedIndex-1].amount/100),this.setState(i)}},{key:"render",value:function(){var e=this.props.invoices,t=this.state,a=t.description,n=t.invoiceId,i=t.amount;return c.a.createElement("form",{onSubmit:this.onFormSubmit,className:"section"},c.a.createElement("h3",{className:"title is-3"},"Add a bank transaction"),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Description"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{name:"description",className:"input",type:"text",placeholder:"e.g Payment for work",value:a,onChange:this.handleInputChange}))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Invoice"),c.a.createElement("div",{className:"control"},c.a.createElement("div",{className:"select"},c.a.createElement("select",{value:n,onChange:this.handleInputChange,name:"invoiceId"},c.a.createElement("option",{key:""},"Select a client"),e&&e.map(function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.clientName)}))))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Amount"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{name:"amount",className:"input",type:"number",placeholder:"100.50",value:i,step:"0.50",onChange:this.handleInputChange}))),c.a.createElement("div",{className:"field is-grouped is-grouped-centered"},c.a.createElement("p",{className:"control"},c.a.createElement("button",{className:"button is-success",type:"submit"},"Submit")),c.a.createElement("p",{className:"control"},c.a.createElement("button",{className:"button is-black",onClick:this.onCancel},"Cancel"))))}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={isModalOpen:!1},a.onAddTxn=function(e){(0,a.props.addBankTxn)(e),a.closeTxnModal()},a.openTxnModal=a.openTxnModal.bind(Object(v.a)(a)),a.closeTxnModal=a.closeTxnModal.bind(Object(v.a)(a)),E.a.setAppElement("#root"),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"openTxnModal",value:function(){this.setState({isModalOpen:!0})}},{key:"closeTxnModal",value:function(){this.setState({isModalOpen:!1})}},{key:"render",value:function(){var e=this.props,t=e.bankTxns,a=e.clz,n=e.invoices,i=this.state.isModalOpen;return c.a.createElement("div",{className:a},c.a.createElement("header",{className:"has-background-grey"},c.a.createElement("h4",{className:"title is-4 has-text-white is-clearfix"},"Bank Transactions",c.a.createElement("span",{className:"button is-link is-inverted is-pulled-right is-outlined",onClick:this.openTxnModal},"Add a Bank Transaction"))),c.a.createElement("table",{className:"table is-striped is-fullwidth"},c.a.createElement("thead",{className:"has-background-grey"},c.a.createElement("tr",null,c.a.createElement("th",{className:"has-text-white"},"Date"),c.a.createElement("th",{className:"has-text-white"},"Invoice Id"),c.a.createElement("th",{className:"has-text-white"},"Description"),c.a.createElement("th",{className:"has-text-white"},"Amount"))),c.a.createElement("tbody",null,t.map(function(e){return c.a.createElement("tr",{key:e.id},c.a.createElement("td",null,f(e.created)),c.a.createElement("td",null,e.invoiceId),c.a.createElement("td",null,e.description),c.a.createElement("td",{className:"has-text-right"},k(e.amount)))}))),c.a.createElement(E.a,{className:"Modal",overlayClassName:"Overlay",isOpen:i,onRequestClose:this.closeTxnModal,contentLabel:"Modal"},i&&c.a.createElement(w,{invoices:n,onSubmit:this.onAddTxn,onClose:this.closeTxnModal})))}}]),t}(n.Component);var T=Object(o.b)(function(e){return{bankTxns:e.bankTxns,invoices:e.invoices}},{addBankTxn:function(e){return{type:y,txn:e}}})(M),D=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.bankTxns,t=e.reduce(function(e,t){return e+t.amount},0),a=function(e){var t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setDate(t.getDate()-e),t}(30).getTime(),n=e.reduce(function(e,t){return t.created>a&&(e+=1),e},0),i=t>15e3?"is-success":t<0?"is-danger":"is-warning";return c.a.createElement("div",{className:"tile"},c.a.createElement("div",{className:"tile is-parent"},c.a.createElement("article",{className:"tile is-child notification "+i},c.a.createElement("p",{className:"title"},k(t)),c.a.createElement("p",{className:"subtitle"},"Available bank balance"))),c.a.createElement("div",{className:"tile is-parent"},c.a.createElement("article",{className:"tile is-child notification is-info"},c.a.createElement("p",{className:"title"},n),c.a.createElement("p",{className:"subtitle"},"Bank transactions (Last 30days)"))))}}]),t}(n.Component);var S=Object(o.b)(function(e){return{invoices:e.invoices,bankTxns:e.bankTxns}})(D),A=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={clientName:"",amount:0,id:"",created:0},a.onFormSubmit=a.onFormSubmit.bind(Object(v.a)(a)),a.onCancel=a.onCancel.bind(Object(v.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(v.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.invoice,t=e.clientName,a=e.amount,n=e.created,c=void 0===n?Date.now():n,i=e.id;a/=100,this.setState({clientName:t,amount:a,id:i,created:c})}},{key:"onFormSubmit",value:function(e){e.preventDefault();var t=this.props.onSubmit,a=this.state,n=a.clientName,c=a.amount,i=a.id,l=a.created;t&&n&&c&&t({id:i,created:l,clientName:n,amount:100*c})}},{key:"onCancel",value:function(e){e.preventDefault();var t=this.props.onClose;t&&t()}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(j.a)({},n,a))}},{key:"render",value:function(){var e=this.state,t=e.clientName,a=e.amount,n=e.created,i=e.id;return c.a.createElement("form",{onSubmit:this.onFormSubmit,className:"section"},c.a.createElement("h3",{className:"title is-3"},i?"Edit the Invoice":"Add an Invoice"),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Invoice Date"),c.a.createElement("div",{className:"control"},f(n))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Client Name"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{name:"clientName",className:"input",type:"text",placeholder:"e.g John Doe",value:t,onChange:this.handleInputChange}))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Amount"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{name:"amount",className:"input",type:"number",placeholder:"100.50",value:a,onChange:this.handleInputChange}))),c.a.createElement("div",{className:"field is-grouped is-grouped-centered"},c.a.createElement("p",{className:"control"},c.a.createElement("button",{className:"button is-success",type:"submit"},i?"Edit Invoice":"Add Invoice")),c.a.createElement("p",{className:"control"},c.a.createElement("button",{className:"button is-black",onClick:this.onCancel},"Cancel"))))}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={isModalOpen:!1,selectedInvoice:null},a.handleInvoiceEdit=function(e){var t=e.target.parentElement,n=a.props.invoices;t&&"TR"===t.tagName&&t.id&&a.openInvoiceModal(n[t.rowIndex-1])},a.onAddInvoice=function(e){var t=a.props,n=t.addInvoice,c=t.updateInvoice;e&&e.id?c(e):n(e),a.closeInvoiceModal()},a.openInvoiceModal=a.openInvoiceModal.bind(Object(v.a)(a)),a.closeInvoiceModal=a.closeInvoiceModal.bind(Object(v.a)(a)),E.a.setAppElement("#root"),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"openInvoiceModal",value:function(e){this.setState({isModalOpen:!0,selectedInvoice:e})}},{key:"closeInvoiceModal",value:function(){this.setState({isModalOpen:!1,selectedInvoice:null})}},{key:"render",value:function(){var e=this.props,t=e.invoices,a=e.bankTxns,n=e.clz,i=this.state,l=i.isModalOpen,o=i.selectedInvoice,s={};return a.forEach(function(e){s[e.invoiceId]?s[e.invoiceId]+=e.amount:s[e.invoiceId]=e.amount}),c.a.createElement("div",{className:n},c.a.createElement("header",{className:"has-background-grey-dark"},c.a.createElement("h4",{className:"title is-4 has-text-white is-clearfix"},"Invoices",c.a.createElement("span",{className:"button is-link is-inverted is-pulled-right is-outlined",onClick:this.openInvoiceModal},"Add an Invoice"))),c.a.createElement("table",{className:"table is-fullwidth is-striped"},c.a.createElement("thead",{className:"has-background-grey-dark"},c.a.createElement("tr",null,c.a.createElement("th",{className:"has-text-white"},"Date"),c.a.createElement("th",{className:"has-text-white"},"Id"),c.a.createElement("th",{className:"has-text-white"},"Client Name"),c.a.createElement("th",{className:"has-text-white"},"Amount"),c.a.createElement("th",{className:"has-text-white has-text-centered"},"Status"))),c.a.createElement("tbody",{onClick:this.handleInvoiceEdit},t.map(function(e){return c.a.createElement("tr",{key:e.id,id:e.id},c.a.createElement("td",null,f(e.created)),c.a.createElement("td",null,e.id),c.a.createElement("td",null,e.clientName),c.a.createElement("td",{className:"has-text-right"},k(e.amount)),c.a.createElement("td",{className:"has-text-centered"},e.amount===s[e.id]?"PAID":"NOT PAID"))}))),c.a.createElement(E.a,{className:"Modal",overlayClassName:"Overlay",isOpen:l,onRequestClose:this.closeInvoiceModal,contentLabel:"Modal"},l&&c.a.createElement(A,{invoice:o,onSubmit:this.onAddInvoice,onClose:this.closeInvoiceModal})))}}]),t}(n.Component);var F=Object(o.b)(function(e){return{invoices:e.invoices,bankTxns:e.bankTxns}},{addInvoice:function(e){return{type:O,invoice:e}},updateInvoice:function(e){return{type:g,invoice:e}}})(B),_=function(){return c.a.createElement("div",null,c.a.createElement(r,null),c.a.createElement("div",{className:"container"},c.a.createElement("section",{className:"section"},c.a.createElement(S,null)),c.a.createElement("section",{className:"columns"},c.a.createElement(T,{clz:"widget column is-half"}),c.a.createElement(F,{clz:"widget column is-half"}))))},z=a(14),L=a(15),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.invoice;switch(t.type){case O:return[{id:"i_".concat(N(10)),clientName:a.clientName,created:Date.now(),amount:parseInt(a.amount,10)}].concat(Object(L.a)(e));case g:return e.map(function(e){return e.id===a.id?Object(z.a)({},a):Object(z.a)({},e,{updated:Date.now()})});case x:return e.filter(function(e){return e.id!==a.id});default:return e}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.txn;switch(t.type){case y:return[{id:"b_".concat(N(10)),description:a.description,invoiceId:a.invoiceId,created:Date.now(),amount:parseInt(a.amount,10)}].concat(Object(L.a)(e));case C:return e.map(function(e){return e.id===a.id?Object(z.a)({},a):e});default:return e}},H=Object(s.b)({invoices:R,bankTxns:K}),J=["Estell Rockhill","Eliz Wahlstrom","Nadia Kierstead","Brittny Bowersox","Keli Sobotka","Otha Eves","Orpha Kinsel","Aurora Sprinkle","Stewart Slavin","Jolie Garrison","Twila Reames","Billie Mikus","Peter Brunt","Marcell Luzier","Brad Becher","Dawn Siqueiros","Felton Esperanza","Larissa Riddles","Lavone Ton","Hiram Netzer"],P=function(){for(var e=[],t=0;t<J.length;t++){var a={id:"i_".concat(N(10)),clientName:J[t],amount:I(-7500,7500),status:0},n=new Date;n.setDate(n.getDate()-I(0,40)),a.created=n.getTime(),e.push(a)}return e.sort(function(e,t){return e.created<t.created?1:-1})},q=function(e){for(var t=[],a=0;a<e.length-5;a++){var n=e[a],c={id:"b_".concat(N(10)),description:n.amount>=0?"Invoice payment by ".concat(n.clientName):"Refund to ".concat(n.clientName),invoiceId:n.id,amount:n.amount},i=new Date(n.created);i.setHours(i.getHours()+I(1,2)),c.created=i.getTime(),t.push(c)}return t.sort(function(e,t){return e.created<t.created?1:-1})},V=function(){var e=P();return{invoices:e,bankTxns:q(e)}};a(42),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W;W=V();var X=Object(s.c)(H,W);l.a.render(c.a.createElement(o.a,{store:X},c.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,1,2]]]);
//# sourceMappingURL=main.a541b2f3.chunk.js.map