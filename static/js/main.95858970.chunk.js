(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(43)},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(14),o=a.n(c),l=a(10),r=a(11),s=function(){return i.a.createElement("nav",{className:"navbar has-background-info",role:"navigation","aria-label":"main navigation"},i.a.createElement("div",{className:"navbar-brand"},i.a.createElement("a",{className:"navbar-item",href:"/"},i.a.createElement("p",{className:"title is-4 has-text-white"},"Self Employed"))))},u=a(3),m=a(4),d=a(6),v=a(5),h=a(2),p=a(7),b=a(13),g=a.n(b),f="ADD_INVOICE",E="EDIT_INVOICE",N="DELETE_INVOICE",k="ADD_BANK_TXN",y="EDIT_BANK_TXN";var O=a(12),I=a(1),C=a.n(I),j=(C.a.shape({id:C.a.string.isRequired,invoiceId:C.a.string.isRequired,description:C.a.string.isRequired,amount:C.a.number.isRequired,created:C.a.number.isRequired}),C.a.shape({id:C.a.string.isRequired,clientName:C.a.string.isRequired,amount:C.a.number.isRequired,created:C.a.number.isRequired}),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(v.a)(t).call(this,e))).state={description:"",invoiceId:"",amount:0},a.onFormSubmit=a.onFormSubmit.bind(Object(h.a)(a)),a.onCancel=a.onCancel.bind(Object(h.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"onFormSubmit",value:function(e){e.preventDefault();var t=this.props.onSubmit,a=this.state,n=a.description,i=a.invoiceId,c=a.amount;t&&n&&i&&c&&t({description:n,invoiceId:i,amount:100*c})}},{key:"onCancel",value:function(e){e.preventDefault();var t=this.props.onClose;t&&t()}},{key:"handleInputChange",value:function(e){var t=this.props.invoices,a=e.target,n="checkbox"===a.type?a.checked:a.value,i=a.name,c=Object(O.a)({},i,n);"invoiceId"===i&&(c.amount=t[a.selectedIndex-1].amount/100),this.setState(c)}},{key:"render",value:function(){var e=this.props.invoices,t=this.state,a=t.description,n=t.invoiceId,c=t.amount;return i.a.createElement("form",{onSubmit:this.onFormSubmit,className:"section"},i.a.createElement("h3",{className:"title is-3"},"Add a bank transaction"),i.a.createElement("div",{className:"field"},i.a.createElement("label",{className:"label"},"Description"),i.a.createElement("div",{className:"control"},i.a.createElement("input",{name:"description",className:"input",type:"text",placeholder:"e.g Payment for work",value:a,onChange:this.handleInputChange}))),i.a.createElement("div",{className:"field"},i.a.createElement("label",{className:"label"},"Invoice"),i.a.createElement("div",{className:"control"},i.a.createElement("div",{className:"select"},i.a.createElement("select",{value:n,onChange:this.handleInputChange,name:"invoiceId"},i.a.createElement("option",{key:""},"Select a client"),e&&e.map(function(e){return i.a.createElement("option",{key:e.id,value:e.id},e.clientName)}))))),i.a.createElement("div",{className:"field"},i.a.createElement("label",{className:"label"},"Amount"),i.a.createElement("div",{className:"control"},i.a.createElement("input",{name:"amount",className:"input",type:"number",placeholder:"100.50",value:c,step:"0.50",onChange:this.handleInputChange}))),i.a.createElement("div",{className:"field is-grouped is-grouped-centered"},i.a.createElement("p",{className:"control"},i.a.createElement("button",{className:"button is-success",type:"submit"},"Submit")),i.a.createElement("p",{className:"control"},i.a.createElement("button",{className:"button is-black",onClick:this.onCancel},"Cancel"))))}}]),t}(n.Component));function M(e){return Math.round(Math.pow(36,e+1)-Math.random()*Math.pow(36,e)).toString(36).slice(1)}function w(e){return new Date(e).toUTCString().split(" ").slice(1,4).join("/")}function x(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}function P(e,t){var a=t||"$";return(e/=100)<0?"-"+a+Math.abs(e).toFixed(2):a+e.toFixed(2)}var T=a(8),D="LEFT",S="RIGHT",R=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e,i=[];n<=t;)i.push(n),n+=a;return i},A=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(v.a)(t).call(this,e))).updateMembers=function(){var e=a.props,t=e.totalRecords,n=void 0===t?null:t,i=e.pageLimit,c=void 0===i?30:i,o=e.pageNeighbours,l=void 0===o?0:o;a.pageLimit="number"===typeof c?c:30,a.totalRecords="number"===typeof n?n:0,a.pageNeighbours="number"===typeof l?Math.max(0,Math.min(l,2)):0,a.totalPages=Math.ceil(a.totalRecords/a.pageLimit)},a.gotoPage=function(e){var t=a.props.onPageChanged,n=void 0===t?function(e){return e}:t,i=Math.max(0,Math.min(e,a.totalPages)),c={currentPage:i,totalPages:a.totalPages,pageLimit:a.pageLimit,totalRecords:a.totalRecords};a.setState({currentPage:i},function(){return n(c)})},a.handleClick=function(e,t){t.preventDefault(),a.gotoPage(e)},a.handleMoveLeft=function(e){e.preventDefault(),a.gotoPage(a.state.currentPage-2*a.pageNeighbours-1)},a.handleMoveRight=function(e){e.preventDefault(),a.gotoPage(a.state.currentPage+2*a.pageNeighbours+1)},a.fetchPageNumbers=function(){var e=a.totalPages,t=a.state.currentPage,n=a.pageNeighbours,i=2*a.pageNeighbours+3;if(e>i+2){var c=[],o=t-n,l=t+n,r=e-1,s=o>2?o:2,u=l<r?l:r,m=i-(c=R(s,u)).length-1,d=s>2,v=u<r,h=D,p=S;if(d&&!v){var b=R(s-m,s-1);c=[h].concat(Object(T.a)(b),Object(T.a)(c))}else if(!d&&v){var g=R(u+1,u+m);c=[].concat(Object(T.a)(c),Object(T.a)(g),[p])}else d&&v&&(c=[h].concat(Object(T.a)(c),[p]));return[1].concat(Object(T.a)(c),[e])}return R(1,e)},a.buildPaginationNumberButton=function(e){return i.a.createElement("button",{className:"page-link",onClick:function(t){return a.handleClick(e,t)}},e)},a.buildPaginationPrevorNextButton=function(e){var t=e===D;return i.a.createElement("button",{className:"page-link","aria-label":t?"Previous":"Next",onClick:t?a.handleMoveLeft:a.handleMoveRight},i.a.createElement("span",{"aria-hidden":"true"},t?"&laquo;":"&raquo;"," "),i.a.createElement("span",{className:"sr-only"},t?"Previous":"Next"))},a.buildPaginationButton=function(e){return e===D||e===S?a.buildPaginationPrevorNextButton(e):a.buildPaginationNumberButton(e)},a.updateMembers(),a.state={currentPage:1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.gotoPage(1)}},{key:"render",value:function(){var e=this;if(!this.totalRecords)return null;if(1===this.totalPages)return null;console.log("pagination render"),this.updateMembers();var t=this.state.currentPage,a=this.fetchPageNumbers();return i.a.createElement(n.Fragment,null,i.a.createElement("nav",{"aria-label":"Pagination"},i.a.createElement("ul",{className:"pagination"},a.map(function(a,n){return i.a.createElement("li",{key:n,className:"page-item".concat(t===a?" active":"")},e.buildPaginationButton(a))}))))}}]),t}(n.Component),B="date",_="money",L="text",z=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(c)))).state={pageIndex:0,rowsPerPage:5},a.buildColumnHtml=function(e,t,n,c){var o,l=e.type,r=void 0===l?L:l,s=a.props.tableKey;if(e.colCallback)o=e.colCallback(t);else switch(o=t[e.key],r){case B:o=w(o);break;case _:o=P(o)}return i.a.createElement("td",{key:"".concat(s,"'_d_'").concat(c,"_").concat(n),className:e.clz},o||"")},a.handleRowClick=function(e){var t=e.target.parentElement,n=a.props,i=n.rows,c=n.onRowClick;t&&"TR"===t.tagName&&c&&c(i[t.rowIndex-1])},a.onPageChanged=function(e){a.state.pageIndex+1!==e.currentPage&&a.setState({pageIndex:e.currentPage-1})},a.handleRowsPerPageChange=function(e){var t=e.target.value;a.setState({rowsPerPage:parseInt(t,10)})},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.columns,n=t.rows,c=t.tableClz,o=void 0===c?"":c,l=t.tableKey,r=this.state,s=r.pageIndex,u=r.rowsPerPage,m=s*u,d=s*u+u,v=n.slice(m,d);return i.a.createElement("table",{className:"table is-fullwidth is-striped"},i.a.createElement("thead",{className:o},i.a.createElement("tr",null,a.map(function(e,t){return i.a.createElement("th",{key:l+"_h_"+t,className:e.clz+" has-text-white"},e.title)}))),i.a.createElement("tbody",{onClick:this.handleRowClick},v.map(function(t,n){return i.a.createElement("tr",{key:l+"_r_"+n,id:t.id},a.map(function(a,i){return e.buildColumnHtml(a,t,i,n)}))})),n&&n.length>0&&i.a.createElement("tfoot",null,i.a.createElement("tr",null,i.a.createElement("td",{colSpan:a.length},i.a.createElement("div",{className:"columns is-vcentered"},i.a.createElement("div",{className:"column"},i.a.createElement("div",{className:"field"},i.a.createElement("div",{className:"control is-flex"},i.a.createElement("label",{className:"horizontal-label"},"Rows per page"),i.a.createElement("div",{className:"select"},i.a.createElement("select",{value:u,onChange:this.handleRowsPerPageChange},[5,10,15,25].map(function(e){return i.a.createElement("option",{key:e,value:e},e)})))))),i.a.createElement("div",{className:"column"},"Showing ",i.a.createElement("b",null,m+1)," - ",i.a.createElement("b",null,d)," of"," ",i.a.createElement("b",null,n.length)),i.a.createElement("div",{className:"column"},i.a.createElement(A,{totalRecords:n.length,pageLimit:u,pageNeighbours:1,onPageChanged:this.onPageChanged})))))))}}]),t}(n.Component),q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(v.a)(t).call(this,e))).state={isModalOpen:!1},a.onAddTxn=function(e){(0,a.props.addBankTxn)(e),a.closeTxnModal()},a.openTxnModal=a.openTxnModal.bind(Object(h.a)(a)),a.closeTxnModal=a.closeTxnModal.bind(Object(h.a)(a)),g.a.setAppElement("#root"),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"openTxnModal",value:function(){this.setState({isModalOpen:!0})}},{key:"closeTxnModal",value:function(){this.setState({isModalOpen:!1})}},{key:"render",value:function(){var e=this.props,t=e.bankTxns,a=e.clz,n=e.invoices,c=this.state.isModalOpen;return i.a.createElement("div",{className:a},i.a.createElement("header",{className:"has-background-grey"},i.a.createElement("h4",{className:"title is-4 has-text-white is-clearfix"},"Bank Transactions",i.a.createElement("span",{className:"button is-link is-inverted is-pulled-right is-outlined",onClick:this.openTxnModal},"Add a Bank Transaction"))),i.a.createElement(z,{columns:[{title:"Date",type:"date",key:"created"},{title:"Invoice",key:"invoiceId"},{title:"Description",key:"description"},{title:"Amount",type:"money",key:"amount"}],rows:t,onRowClick:this.onRowClick,tableClz:"has-background-grey",tableKey:"bnkTxn"}),i.a.createElement(g.a,{className:"Modal",overlayClassName:"Overlay",isOpen:c,onRequestClose:this.closeTxnModal,contentLabel:"Modal"},c&&i.a.createElement(j,{invoices:n,onSubmit:this.onAddTxn,onClose:this.closeTxnModal})))}}]),t}(n.Component);var F=Object(l.b)(function(e){return{bankTxns:e.bankTxns,invoices:e.invoices}},{addBankTxn:function(e){return{type:k,txn:e}}})(q),K=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.bankTxns,t=e.reduce(function(e,t){return e+t.amount},0),a=function(e){var t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setDate(t.getDate()-e),t}(30).getTime(),n=e.reduce(function(e,t){return t.created>a&&(e+=1),e},0),c=t>15e3?"is-success":t<0?"is-danger":"is-warning";return i.a.createElement("div",{className:"tile"},i.a.createElement("div",{className:"tile is-parent"},i.a.createElement("article",{className:"tile is-child notification "+c},i.a.createElement("p",{className:"title"},P(t)),i.a.createElement("p",{className:"subtitle"},"Available bank balance"))),i.a.createElement("div",{className:"tile is-parent"},i.a.createElement("article",{className:"tile is-child notification is-info"},i.a.createElement("p",{className:"title"},n),i.a.createElement("p",{className:"subtitle"},"Bank transactions (Last 30days)"))))}}]),t}(n.Component);var H=Object(l.b)(function(e){return{invoices:e.invoices,bankTxns:e.bankTxns}})(K),J=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(v.a)(t).call(this,e))).state={clientName:"",amount:0,id:"",created:0},a.onFormSubmit=a.onFormSubmit.bind(Object(h.a)(a)),a.onCancel=a.onCancel.bind(Object(h.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.invoice,t=e.clientName,a=e.amount,n=e.created,i=void 0===n?Date.now():n,c=e.id;a/=100,this.setState({clientName:t,amount:a,id:c,created:i})}},{key:"onFormSubmit",value:function(e){e.preventDefault();var t=this.props.onSubmit,a=this.state,n=a.clientName,i=a.amount,c=a.id,o=a.created;t&&n&&i&&t({id:c,created:o,clientName:n,amount:100*i})}},{key:"onCancel",value:function(e){e.preventDefault();var t=this.props.onClose;t&&t()}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(O.a)({},n,a))}},{key:"render",value:function(){var e=this.state,t=e.clientName,a=e.amount,n=e.created,c=e.id;return i.a.createElement("form",{onSubmit:this.onFormSubmit,className:"section"},i.a.createElement("h3",{className:"title is-3"},c?"Edit the Invoice":"Add an Invoice"),i.a.createElement("div",{className:"field"},i.a.createElement("label",{className:"label"},"Invoice Date"),i.a.createElement("div",{className:"control"},w(n))),i.a.createElement("div",{className:"field"},i.a.createElement("label",{className:"label"},"Client Name"),i.a.createElement("div",{className:"control"},i.a.createElement("input",{name:"clientName",className:"input",type:"text",placeholder:"e.g John Doe",value:t,onChange:this.handleInputChange}))),i.a.createElement("div",{className:"field"},i.a.createElement("label",{className:"label"},"Amount"),i.a.createElement("div",{className:"control"},i.a.createElement("input",{name:"amount",className:"input",type:"number",placeholder:"100.50",value:a,onChange:this.handleInputChange}))),i.a.createElement("div",{className:"field is-grouped is-grouped-centered"},i.a.createElement("p",{className:"control"},i.a.createElement("button",{className:"button is-success",type:"submit"},c?"Edit Invoice":"Add Invoice")),i.a.createElement("p",{className:"control"},i.a.createElement("button",{className:"button is-black",onClick:this.onCancel},"Cancel"))))}}]),t}(n.Component),V=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(v.a)(t).call(this,e))).state={isModalOpen:!1,selectedInvoice:null},a.handleInvoiceEdit=function(e){e&&a.openInvoiceModal(e)},a.onAddInvoice=function(e){var t=a.props,n=t.addInvoice,i=t.updateInvoice;e&&e.id?i(e):n(e),a.closeInvoiceModal()},a.openInvoiceModal=a.openInvoiceModal.bind(Object(h.a)(a)),a.closeInvoiceModal=a.closeInvoiceModal.bind(Object(h.a)(a)),g.a.setAppElement("#root"),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"openInvoiceModal",value:function(e){this.setState({isModalOpen:!0,selectedInvoice:e})}},{key:"closeInvoiceModal",value:function(){this.setState({isModalOpen:!1,selectedInvoice:null})}},{key:"render",value:function(){var e=this.props,t=e.invoices,a=e.bankTxns,n=e.clz,c=this.state,o=c.isModalOpen,l=c.selectedInvoice,r={};a.forEach(function(e){r[e.invoiceId]?r[e.invoiceId]+=e.amount:r[e.invoiceId]=e.amount});var s=[{title:"Date",type:"date",key:"created"},{title:"Id",key:"id"},{title:"Client Name",key:"clientName"},{title:"Amount",type:"money",key:"amount"},{title:"Status",key:"status",colCallback:function(e){return e.amount===r[e.id]?"PAID":"NOT PAID"},clz:"has-text-centered"}];return i.a.createElement("div",{className:n},i.a.createElement("header",{className:"has-background-grey-dark"},i.a.createElement("h4",{className:"title is-4 has-text-white is-clearfix"},"Invoices",i.a.createElement("span",{className:"button is-link is-inverted is-pulled-right is-outlined",onClick:this.openInvoiceModal},"Add an Invoice"))),i.a.createElement(z,{columns:s,rows:t,onRowClick:this.handleInvoiceEdit,tableClz:"has-background-grey-dark",tableKey:"inv"}),i.a.createElement(g.a,{className:"Modal",overlayClassName:"Overlay",isOpen:o,onRequestClose:this.closeInvoiceModal,contentLabel:"Modal"},o&&i.a.createElement(J,{invoice:l,onSubmit:this.onAddInvoice,onClose:this.closeInvoiceModal})))}}]),t}(n.Component);var W=Object(l.b)(function(e){return{invoices:e.invoices,bankTxns:e.bankTxns}},{addInvoice:function(e){return{type:f,invoice:e}},updateInvoice:function(e){return{type:E,invoice:e}}})(V),G=function(){return i.a.createElement("div",null,i.a.createElement(s,null),i.a.createElement("div",{className:"container"},i.a.createElement("section",{className:"section"},i.a.createElement(H,null)),i.a.createElement("section",{className:"columns"},i.a.createElement(F,{clz:"widget column is-half"}),i.a.createElement(W,{clz:"widget column is-half"}))))},X=a(15),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.invoice;switch(t.type){case f:return[{id:"i_".concat(M(10)),clientName:a.clientName,created:Date.now(),amount:parseInt(a.amount,10)}].concat(Object(T.a)(e));case E:return e.map(function(e){return e.id===a.id?Object(X.a)({},a):Object(X.a)({},e,{updated:Date.now()})});case N:return e.filter(function(e){return e.id!==a.id});default:return e}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.txn;switch(t.type){case k:return[{id:"b_".concat(M(10)),description:a.description,invoiceId:a.invoiceId,created:Date.now(),amount:parseInt(a.amount,10)}].concat(Object(T.a)(e));case y:return e.map(function(e){return e.id===a.id?Object(X.a)({},a):e});default:return e}},Q=Object(r.b)({invoices:$,bankTxns:U}),Y=["Estell Rockhill","Eliz Wahlstrom","Nadia Kierstead","Brittny Bowersox","Keli Sobotka","Otha Eves","Orpha Kinsel","Aurora Sprinkle","Stewart Slavin","Jolie Garrison","Twila Reames","Billie Mikus","Peter Brunt","Marcell Luzier","Brad Becher","Dawn Siqueiros","Felton Esperanza","Larissa Riddles","Lavone Ton","Hiram Netzer"],Z=function(){for(var e=[],t=0;t<Y.length;t++){var a={id:"i_".concat(M(10)),clientName:Y[t],amount:x(-7500,7500),status:0},n=new Date;n.setDate(n.getDate()-x(0,40)),a.created=n.getTime(),e.push(a)}return e.sort(function(e,t){return e.created<t.created?1:-1})},ee=function(e){for(var t=[],a=0;a<e.length-5;a++){var n=e[a],i={id:"b_".concat(M(10)),description:n.amount>=0?"Invoice payment by ".concat(n.clientName):"Refund to ".concat(n.clientName),invoiceId:n.id,amount:n.amount},c=new Date(n.created);c.setHours(c.getHours()+x(1,2)),i.created=c.getTime(),t.push(i)}return t.sort(function(e,t){return e.created<t.created?1:-1})},te=function(){var e=Z();return{invoices:e,bankTxns:ee(e)}};a(42),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae;ae=te();var ne=Object(r.c)(Q,ae);o.a.render(i.a.createElement(l.a,{store:ne},i.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,1,2]]]);
//# sourceMappingURL=main.95858970.chunk.js.map